-- üåÄ Auto Trigger Checkpoints (cp1-10) + GUI ENABLE/DISABLE + Notifikasi (0.1s delay)
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Buat GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AutoCPGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = game.CoreGui

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 200, 0, 80)
Frame.Position = UDim2.new(0.5, -100, 0.2, 0)
Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui
Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 10)

local ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(0, 180, 0, 50)
ToggleButton.Position = UDim2.new(0.5, -90, 0.5, -25)
ToggleButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.Text = "ENABLE"
ToggleButton.Font = Enum.Font.GothamBold
ToggleButton.TextSize = 16
ToggleButton.Parent = Frame
Instance.new("UICorner", ToggleButton).CornerRadius = UDim.new(0, 8)

-- === Variabel utama ===
local running = false
local checkpointFolder = workspace:WaitForChild("Checkpoint")

-- Fungsi notifikasi
local function showNotification(text, color)
    local notif = Instance.new("TextLabel")
    notif.Size = UDim2.new(0, 220, 0, 40)
    notif.Position = UDim2.new(1, -240, 1, -60)
    notif.BackgroundColor3 = color
    notif.TextColor3 = Color3.fromRGB(255, 255, 255)
    notif.Text = text
    notif.Font = Enum.Font.GothamBold
    notif.TextSize = 14
    notif.Parent = ScreenGui
    notif.BackgroundTransparency = 0.1
    Instance.new("UICorner", notif).CornerRadius = UDim.new(0, 8)

    task.delay(3, function()
        notif:Destroy()
    end)
end

-- Fungsi trigger TouchInterest
local function triggerTouch(part)
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")
    if part:IsA("BasePart") and part:FindFirstChildOfClass("TouchTransmitter") then
        firetouchinterest(hrp, part, 0)
        task.wait()
        firetouchinterest(hrp, part, 1)
    end
end

-- Loop utama (delay 0.1 detik)
task.spawn(function()
    while true do
        if running then
            for i = 1, 10 do
                local cp = checkpointFolder:FindFirstChild("cp" .. i)
                if cp then
                    for _, obj in ipairs(cp:GetDescendants()) do
                        if obj:IsA("BasePart") and obj:FindFirstChildOfClass("TouchTransmitter") then
                            triggerTouch(obj)
                            task.wait(0.1) -- delay per part
                        end
                    end
                end
            end
        end
        task.wait(0.5) -- jeda antar loop besar
    end
end)

-- Event tombol
ToggleButton.MouseButton1Click:Connect(function()
    running = not running
    if running then
        ToggleButton.Text = "DISABLE"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 170, 90)
        showNotification("‚úÖ ENABLED (0.1s)", Color3.fromRGB(0, 170, 90))
    else
        ToggleButton.Text = "ENABLE"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
        showNotification("‚ùå DISABLED", Color3.fromRGB(170, 50, 50))
    end
end)